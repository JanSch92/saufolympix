{% extends 'base.html.twig' %}

{% block title %}{{ olympix.name }} - Live Anzeige{% endblock %}

{% block body %}
<div class="tv-display rounded-lg p-8 mb-8">
    <div class="text-center">
        <h1 class="text-4xl font-bold mb-2">{{ olympix.name }}</h1>
        <p class="text-xl opacity-90">Live Ergebnisse</p>
    </div>
</div>

<div class="grid grid-cols-1 lg:grid-cols-3 gap-8">
    <!-- Player Rankings -->
    <div class="lg:col-span-2">
        <div class="bg-white rounded-lg shadow-md p-6">
            <h2 class="text-2xl font-bold text-gray-800 mb-6 flex items-center">
                üèÜ Aktuelle Rangliste
            </h2>
            
            <div id="players-ranking" class="space-y-4">
                {% for player in players %}
                    <div class="player-card bg-white rounded-lg shadow-md p-6 flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <div class="ranking-badge {% if loop.index == 1 %}ranking-1{% elseif loop.index == 2 %}ranking-2{% elseif loop.index == 3 %}ranking-3{% else %}ranking-default{% endif %}">
                                {{ loop.index }}
                            </div>
                            <div>
                                <h3 class="text-lg font-semibold text-gray-800">{{ player.name }}</h3>
                                <div class="flex items-center space-x-2 mt-1">
                                    <span class="text-sm text-gray-600">Joker:</span>
                                    <span class="text-xs px-2 py-1 rounded-full {% if player.hasJokerDoubleAvailable %}bg-green-100 text-green-800{% else %}bg-gray-100 text-gray-500{% endif %}">
                                        2x {% if player.hasJokerDoubleAvailable %}‚úì{% else %}‚úó{% endif %}
                                    </span>
                                    <span class="text-xs px-2 py-1 rounded-full {% if player.hasJokerSwapAvailable %}bg-blue-100 text-blue-800{% else %}bg-gray-100 text-gray-500{% endif %}">
                                        ‚áÑ {% if player.hasJokerSwapAvailable %}‚úì{% else %}‚úó{% endif %}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-2xl font-bold text-gray-800">{{ player.totalPoints }}</div>
                            <div class="text-sm text-gray-500">Punkte</div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    
    <!-- Current Game Info -->
    <div class="space-y-6">
        <!-- Current Game -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-bold text-gray-800 mb-4">üéÆ Aktuelles Spiel</h3>
            <div id="current-game">
                {% if current_game %}
                    <div class="game-card active bg-white rounded-lg shadow-md p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">{{ current_game.name }}</h3>
                                <span class="text-sm text-gray-600 capitalize">{{ current_game.gameType|replace({'_': ' '}) }}</span>
                            </div>
                            <div class="text-green-600 font-semibold">
                                <span class="inline-block w-3 h-3 bg-green-500 rounded-full mr-2 animate-pulse"></span>
                                AKTIV
                            </div>
                        </div>
                    </div>
                {% else %}
                    <div class="text-center text-gray-500">
                        Kein aktives Spiel
                    </div>
                {% endif %}
            </div>
        </div>
        
        <!-- Next Game -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-bold text-gray-800 mb-4">‚è≠Ô∏è N√§chstes Spiel</h3>
            <div id="next-game">
                {% if next_game %}
                    <div class="game-card bg-white rounded-lg shadow-md p-6">
                        <div class="flex items-center justify-between">
                            <div>
                                <h3 class="text-xl font-bold text-gray-800">{{ next_game.name }}</h3>
                                <span class="text-sm text-gray-600 capitalize">{{ next_game.gameType|replace({'_': ' '}) }}</span>
                            </div>
                            <div class="text-blue-600 font-semibold">
                                N√ÑCHSTES SPIEL
                            </div>
                        </div>
                    </div>
                {% else %}
                    <div class="text-center text-gray-500">
                        Kein n√§chstes Spiel
                    </div>
                {% endif %}
            </div>
        </div>
        
        <!-- Game History -->
        <div class="bg-white rounded-lg shadow-md p-6">
            <h3 class="text-lg font-bold text-gray-800 mb-4">üìà Spiel√ºbersicht</h3>
            <div class="space-y-2">
                {% for game in olympix.games %}
                    <div class="flex items-center justify-between p-3 {% if game.status == 'completed' %}bg-green-50 border-l-4 border-green-500{% elseif game.status == 'active' %}bg-blue-50 border-l-4 border-blue-500{% else %}bg-gray-50 border-l-4 border-gray-300{% endif %} rounded">
                        <div>
                            <div class="font-medium text-gray-800">{{ game.name }}</div>
                            <div class="text-sm text-gray-600 capitalize">{{ game.gameType|replace({'_': ' '}) }}</div>
                        </div>
                        <div class="text-sm font-medium {% if game.status == 'completed' %}text-green-600{% elseif game.status == 'active' %}text-blue-600{% else %}text-gray-500{% endif %}">
                            {% if game.status == 'completed' %}
                                ‚úì Abgeschlossen
                            {% elseif game.status == 'active' %}
                                ‚è∏Ô∏è Aktiv
                            {% else %}
                                ‚è≥ Ausstehend
                            {% endif %}
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<!-- Tournament Bracket Display -->
{% if current_game and current_game.isTournamentGame and current_game.tournament %}
    <div class="mt-8 bg-white rounded-lg shadow-md p-6">
        <h2 class="text-2xl font-bold text-gray-800 mb-6">üèÜ Turnier-Bracket</h2>
        <div class="tournament-bracket">
            <!-- Bracket will be rendered here -->
            <div id="tournament-bracket">
                <!-- Tournament bracket content will be loaded via JavaScript -->
            </div>
        </div>
    </div>
{% endif %}
{% endblock %}